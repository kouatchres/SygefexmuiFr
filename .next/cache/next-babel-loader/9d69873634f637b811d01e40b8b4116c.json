{"ast":null,"code":"var _jsxFileName = \"E:\\\\sygefexMui\\\\sygefexMui-frontend\\\\src\\\\components\\\\examiner\\\\CreateExaminer.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { MinimStyledPage } from \"../styles/StyledPage\";\nimport Error from \"../ErrorMessage.js\";\nimport { Formik, Form } from \"formik\";\nimport Router from \"next/router\";\nimport styled from \"styled-components\";\nimport * as Yup from \"yup\";\nimport useForm from \"../utils/useForm\";\nimport { createExaminerMutation } from \"../queries&Mutations&Functions/Mutations\";\nimport { SygexInput, StyledForm, ButtonStyled, StyledButton } from \"../utils/FormInputs\";\nimport { uniqueCodeGen } from \"../queries&Mutations&Functions/Functions\";\nimport { FormikRadio } from \"@dccs/react-formik-mui\";\nimport { FormControl, FormLabel, RadioGroup } from \"@material-ui/core\";\nconst InputGroup = styled.div.withConfig({\n  displayName: \"CreateExaminer__InputGroup\",\n  componentId: \"sc-1n2i1xf-0\"\n})([\"display:flex;flex-direction:column;margin:0 1rem;min-width:12rem;.RadioSet{display:flex;flex-direction:row;}\"]);\nconst PicFrame = styled.div.withConfig({\n  displayName: \"CreateExaminer__PicFrame\",\n  componentId: \"sc-1n2i1xf-1\"\n})([\"display:flex;flex-direction:column;margin-top:1rem;img{margin-top:1rem;margin-left:5rem;height:15rem;width:15rem;border-radius:15px;background-size:contain;background-position:center;}\"]);\nconst TwoGroups = styled.div.withConfig({\n  displayName: \"CreateExaminer__TwoGroups\",\n  componentId: \"sc-1n2i1xf-2\"\n})([\"display:grid;grid-template-columns:repeat(auto-fit,minmax(15rem,1fr));\"]);\nconst AllControls = styled.div.withConfig({\n  displayName: \"CreateExaminer__AllControls\",\n  componentId: \"sc-1n2i1xf-3\"\n})([\"display:flex;flex-direction:column;min-width:15rem;img{margin-top:0.15rem;margin-left:0.5rem;height:13rem;width:13rem;border-radius:0.9rem;background-size:contain;background-position:center;}\"]);\nconst validationSchema = Yup.object().shape({\n  examiner1stName: Yup.string().required(\"Nom obligatoire\"),\n  examiner2ndName: Yup.string().required(\"PrÃ©nom obligatoire\"),\n  examinerOtherNames: Yup.string(),\n  examinerMatricule: Yup.string().required(\"No de Matricule obligatoire\"),\n  examinerCNI: Yup.string().required(\"Numero de la CNI obligatoire\"),\n  examinerPhone: Yup.number().required(\"Numero de portable obligatoire\"),\n  gender: Yup.string().required(\"Choix de votre sexe obligatoire\")\n});\n\nconst CreateExaminer = () => {\n  const initialValues = {\n    examiner1stName: \"\",\n    examiner2ndName: \"\",\n    examinerOtherNames: \"\",\n    examinerEmail: \"\",\n    examinerPhone: \"\",\n    examinerCNI: \"\",\n    examinerCode: \"\",\n    examinerMatricule: \"\",\n    gender: \"\"\n  };\n  const [state, setState] = useForm({\n    examinerImage: \"\"\n  });\n\n  const uploadFile = async e => {\n    const files = e.target.files;\n    const data = new FormData();\n    data.append(\"file\", files[0]);\n    data.append(\"upload_preset\", \"ineximages\");\n    const res = await fetch(\"https://api.cloudinary.com/v1_1/inex/image/upload\", {\n      method: \"POST\",\n      body: data\n    });\n    const file = await res.json();\n    console.log(file);\n    console.log(file.secure_url);\n    setState({\n      examinerImage: file.secure_url\n    });\n  };\n\n  const [createExaminer, {\n    loading,\n    error\n  }] = useMutation(createExaminerMutation);\n  return __jsx(Formik, {\n    method: \"POST\",\n    initialValues: initialValues,\n    validationSchema: validationSchema,\n    onSubmit: async (values, {\n      setSubmitting,\n      resetForm\n    }) => {\n      const res = await createExaminer({\n        variables: _objectSpread(_objectSpread({}, values), {}, {\n          examinerImage: state.examinerImage,\n          examinerCode: uniqueCodeGen(12)\n        })\n      });\n      Router.push({\n        pathname: \"/show/singleExaminer\",\n        query: {\n          id: res.data.createExaminer.id\n        }\n      });\n      setTimeout(() => {\n        console.log(JSON.stringify(values, null, 2));\n        console.log(res);\n        resetForm({\n          values: \"\"\n        });\n        setSubmitting(false);\n      }, 200);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, ({\n    values,\n    setFieldValue,\n    isSubmitting\n  }) => __jsx(MinimStyledPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, __jsx(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, \"Renseignement Examinateur\"), __jsx(Error, {\n    error: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }), __jsx(StyledForm, {\n    disabled: isSubmitting || loading,\n    \"aria-busy\": isSubmitting || loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, __jsx(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, __jsx(AllControls, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, __jsx(TwoGroups, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, __jsx(InputGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 19\n    }\n  }, __jsx(SygexInput, {\n    name: \"file\",\n    type: \"file\",\n    onChange: uploadFile,\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }), __jsx(FormLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 21\n    }\n  }, \"Gender\"), __jsx(RadioGroup, {\n    name: \"Gender\",\n    className: \"RadioSet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, __jsx(FormikRadio, {\n    label: \"Femele\",\n    name: \"gender\",\n    value: \"F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 23\n    }\n  }), __jsx(FormikRadio, {\n    label: \"Male\",\n    name: \"gender\",\n    value: \"M\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 23\n    }\n  })), __jsx(SygexInput, {\n    name: \"examiner1stName\",\n    type: \"text\",\n    label: \"Nom\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 21\n    }\n  }), __jsx(SygexInput, {\n    name: \"examiner2ndName\",\n    type: \"text\",\n    label: \"Pr\\xE9nom\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }), __jsx(SygexInput, {\n    name: \"examinerOtherNames\",\n    type: \"text\",\n    label: \"Autres Noms\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }), __jsx(SygexInput, {\n    name: \"examinerMatricule\",\n    type: \"text\",\n    label: \"Num\\xE9ro Matricule\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }), __jsx(SygexInput, {\n    name: \"examinerCNI\",\n    type: \"text\",\n    label: \"Num\\xE9ro de Carte d'Identit\\xE9 Nationale\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }), __jsx(SygexInput, {\n    name: \"examinerPhone\",\n    type: \"number\",\n    label: \"Num\\xE9ro de portable\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 21\n    }\n  }), __jsx(SygexInput, {\n    name: \"examinerEmail\",\n    type: \"email\",\n    label: \"Votre Email\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }), __jsx(PicFrame, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, state.examinerImage && __jsx(\"img\", {\n    src: state.examinerImage,\n    alt: \"Upload image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  })))), __jsx(ButtonStyled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }, __jsx(StyledButton, {\n    disabled: isSubmitting,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  }, \"Valid\", isSubmitting ? \"ation en cours\" : \"er\")))))));\n};\n\nexport default CreateExaminer;","map":{"version":3,"sources":["E:/sygefexMui/sygefexMui-frontend/src/components/examiner/CreateExaminer.jsx"],"names":["React","useMutation","MinimStyledPage","Error","Formik","Form","Router","styled","Yup","useForm","createExaminerMutation","SygexInput","StyledForm","ButtonStyled","StyledButton","uniqueCodeGen","FormikRadio","FormControl","FormLabel","RadioGroup","InputGroup","div","PicFrame","TwoGroups","AllControls","validationSchema","object","shape","examiner1stName","string","required","examiner2ndName","examinerOtherNames","examinerMatricule","examinerCNI","examinerPhone","number","gender","CreateExaminer","initialValues","examinerEmail","examinerCode","state","setState","examinerImage","uploadFile","e","files","target","data","FormData","append","res","fetch","method","body","file","json","console","log","secure_url","createExaminer","loading","error","values","setSubmitting","resetForm","variables","push","pathname","query","id","setTimeout","JSON","stringify","setFieldValue","isSubmitting"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useMutation} from \"@apollo/react-hooks\";\r\nimport { MinimStyledPage } from \"../styles/StyledPage\";\r\nimport Error from \"../ErrorMessage.js\";\r\nimport { Formik, Form } from \"formik\";\r\nimport Router from \"next/router\";\r\nimport styled from \"styled-components\";\r\nimport * as Yup from \"yup\";\r\nimport useForm from \"../utils/useForm\";\r\nimport { createExaminerMutation } from \"../queries&Mutations&Functions/Mutations\";\r\nimport {\r\n  SygexInput,\r\n  StyledForm,\r\n  ButtonStyled,\r\n  StyledButton,\r\n} from \"../utils/FormInputs\";\r\nimport {uniqueCodeGen} from \"../queries&Mutations&Functions/Functions\";\r\nimport {FormikRadio} from \"@dccs/react-formik-mui\";\r\nimport { FormControl, FormLabel, RadioGroup } from \"@material-ui/core\";\r\n\r\nconst InputGroup = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 0 1rem;\r\n  min-width: 12rem;\r\n  .RadioSet {\r\n    display: flex;\r\n    flex-direction: row;\r\n  }\r\n`;\r\n\r\nconst PicFrame = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-top: 1rem;\r\n  img {\r\n    margin-top: 1rem;\r\n    margin-left: 5rem;\r\n    height: 15rem;\r\n    width: 15rem;\r\n    border-radius: 15px;\r\n    background-size: contain;\r\n    background-position: center;\r\n  }\r\n`;\r\nconst TwoGroups = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(15rem, 1fr));\r\n`;\r\nconst AllControls = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 15rem;\r\n  img {\r\n    margin-top: 0.15rem;\r\n    margin-left: 0.5rem;\r\n    height: 13rem;\r\n    width: 13rem;\r\n    border-radius: 0.9rem;\r\n    background-size: contain;\r\n    background-position: center;\r\n  }\r\n`;\r\n\r\nconst validationSchema = Yup.object().shape({\r\n  examiner1stName: Yup.string().required(\"Nom obligatoire\"),\r\n  examiner2ndName: Yup.string().required(\"PrÃ©nom obligatoire\"),\r\n  examinerOtherNames: Yup.string(),\r\n  examinerMatricule: Yup.string().required(\"No de Matricule obligatoire\"),\r\n  examinerCNI: Yup.string().required(\"Numero de la CNI obligatoire\"),\r\n  examinerPhone: Yup.number().required(\"Numero de portable obligatoire\"),\r\n  gender: Yup.string().required(\"Choix de votre sexe obligatoire\"),\r\n});\r\n\r\nconst CreateExaminer = () => {\r\n  const initialValues = {\r\n    examiner1stName: \"\",\r\n    examiner2ndName: \"\",\r\n    examinerOtherNames: \"\",\r\n    examinerEmail: \"\",\r\n    examinerPhone: \"\",\r\n    examinerCNI: \"\",\r\n    examinerCode: \"\",\r\n    examinerMatricule: \"\",\r\n    gender: \"\",\r\n  };\r\n\r\n  const [state, setState] = useForm({ examinerImage: \"\" });\r\n\r\n  const uploadFile = async (e) => {\r\n    const files = e.target.files;\r\n    const data = new FormData();\r\n    data.append(\"file\", files[0]);\r\n    data.append(\"upload_preset\", \"ineximages\");\r\n    const res = await fetch(\r\n      \"https://api.cloudinary.com/v1_1/inex/image/upload\",\r\n      {\r\n        method: \"POST\",\r\n        body: data,\r\n      }\r\n    );\r\n    const file = await res.json();\r\n    console.log(file);\r\n    console.log(file.secure_url);\r\n    setState({ examinerImage: file.secure_url });\r\n  };\r\n\r\n  const [createExaminer, { loading, error }] = useMutation(\r\n    createExaminerMutation\r\n  );\r\n  return (\r\n    <Formik\r\n      method=\"POST\"\r\n      initialValues={initialValues}\r\n      validationSchema={validationSchema}\r\n      onSubmit={async (values, { setSubmitting, resetForm }) => {\r\n        const res = await createExaminer({\r\n          variables: {\r\n            ...values,\r\n            examinerImage: state.examinerImage,\r\n            examinerCode: uniqueCodeGen(12),\r\n          },\r\n        });\r\n        Router.push({\r\n          pathname: \"/show/singleExaminer\",\r\n          query: {\r\n            id: res.data.createExaminer.id,\r\n          },\r\n        });\r\n        setTimeout(() => {\r\n          console.log(JSON.stringify(values, null, 2));\r\n          console.log(res);\r\n          resetForm({ values: \"\" });\r\n          setSubmitting(false);\r\n        }, 200);\r\n      }}\r\n    >\r\n      {({ values, setFieldValue, isSubmitting }) => (\r\n        <MinimStyledPage>\r\n          <h4>Renseignement Examinateur</h4>\r\n          <Error error={error} />\r\n          <StyledForm\r\n            disabled={isSubmitting || loading }\r\n            aria-busy={isSubmitting || loading }\r\n          >\r\n            <Form>\r\n              <AllControls>\r\n                <TwoGroups>\r\n                  <InputGroup>\r\n                    <SygexInput\r\n                      name=\"file\"\r\n                      type=\"file\"\r\n                      onChange={uploadFile}\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <FormLabel>Gender</FormLabel>\r\n                    <RadioGroup name=\"Gender\" className=\"RadioSet\">\r\n                      <FormikRadio label=\"Femele\" name=\"gender\" value=\"F\" />\r\n                      <FormikRadio label=\"Male\" name=\"gender\" value=\"M\" />\r\n                    </RadioGroup>\r\n\r\n                    <SygexInput\r\n                      name=\"examiner1stName\"\r\n                      type=\"text\"\r\n                      label=\"Nom\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examiner2ndName\"\r\n                      type=\"text\"\r\n                      label=\"PrÃ©nom\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examinerOtherNames\"\r\n                      type=\"text\"\r\n                      label=\"Autres Noms\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examinerMatricule\"\r\n                      type=\"text\"\r\n                      label=\"NumÃ©ro Matricule\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examinerCNI\"\r\n                      type=\"text\"\r\n                      label=\"NumÃ©ro de Carte d'IdentitÃ© Nationale\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examinerPhone\"\r\n                      type=\"number\"\r\n                      label=\"NumÃ©ro de portable\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examinerEmail\"\r\n                      type=\"email\"\r\n                      label=\"Votre Email\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <PicFrame>\r\n                      {state.examinerImage && (\r\n                        <img src={state.examinerImage} alt=\"Upload image\" />\r\n                      )}\r\n                    </PicFrame>\r\n                  </InputGroup>\r\n                </TwoGroups>\r\n                <ButtonStyled>\r\n                  <StyledButton disabled={isSubmitting} type=\"submit\">\r\n                    Valid{isSubmitting ? \"ation en cours\" : \"er\"}\r\n                  </StyledButton>\r\n                </ButtonStyled>\r\n              </AllControls>\r\n            </Form>\r\n          </StyledForm>\r\n        </MinimStyledPage>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\nexport default CreateExaminer;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _defineProperty from \"E:/sygefexMui/sygefexMui-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"E:/sygefexMui/sygefexMui-frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/sygefexMui/sygefexMui-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"E:/sygefexMui/sygefexMui-frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\sygefexMui\\\\sygefexMui-frontend\\\\src\\\\components\\\\examiner\\\\CreateExaminer.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { MinimStyledPage } from \"../styles/StyledPage\";\nimport Error from \"../ErrorMessage.js\";\nimport { Formik, Form } from \"formik\";\nimport Router from \"next/router\";\nimport styled from \"styled-components\";\nimport * as Yup from \"yup\";\nimport useForm from \"../utils/useForm\";\nimport { createExaminerMutation } from \"../queries&Mutations&Functions/Mutations\";\nimport { SygexInput, StyledForm, ButtonStyled, StyledButton } from \"../utils/FormInputs\";\nimport { uniqueCodeGen } from \"../queries&Mutations&Functions/Functions\";\nimport { FormikRadio } from \"@dccs/react-formik-mui\";\nimport { FormControl, FormLabel, RadioGroup } from \"@material-ui/core\";\nvar InputGroup = styled.div.withConfig({\n  displayName: \"CreateExaminer__InputGroup\",\n  componentId: \"sc-1n2i1xf-0\"\n})([\"display:flex;flex-direction:column;margin:0 1rem;min-width:12rem;.RadioSet{display:flex;flex-direction:row;}\"]);\n_c = InputGroup;\nvar PicFrame = styled.div.withConfig({\n  displayName: \"CreateExaminer__PicFrame\",\n  componentId: \"sc-1n2i1xf-1\"\n})([\"display:flex;flex-direction:column;margin-top:1rem;img{margin-top:1rem;margin-left:5rem;height:15rem;width:15rem;border-radius:15px;background-size:contain;background-position:center;}\"]);\n_c2 = PicFrame;\nvar TwoGroups = styled.div.withConfig({\n  displayName: \"CreateExaminer__TwoGroups\",\n  componentId: \"sc-1n2i1xf-2\"\n})([\"display:grid;grid-template-columns:repeat(auto-fit,minmax(15rem,1fr));\"]);\n_c3 = TwoGroups;\nvar AllControls = styled.div.withConfig({\n  displayName: \"CreateExaminer__AllControls\",\n  componentId: \"sc-1n2i1xf-3\"\n})([\"display:flex;flex-direction:column;min-width:15rem;img{margin-top:0.15rem;margin-left:0.5rem;height:13rem;width:13rem;border-radius:0.9rem;background-size:contain;background-position:center;}\"]);\n_c4 = AllControls;\nvar validationSchema = Yup.object().shape({\n  examiner1stName: Yup.string().required(\"Nom obligatoire\"),\n  examiner2ndName: Yup.string().required(\"Prénom obligatoire\"),\n  examinerOtherNames: Yup.string(),\n  examinerMatricule: Yup.string().required(\"No de Matricule obligatoire\"),\n  examinerCNI: Yup.string().required(\"Numero de la CNI obligatoire\"),\n  examinerPhone: Yup.number().required(\"Numero de portable obligatoire\"),\n  gender: Yup.string().required(\"Choix de votre sexe obligatoire\")\n});\n\nvar CreateExaminer = function CreateExaminer() {\n  _s();\n\n  var initialValues = {\n    examiner1stName: \"\",\n    examiner2ndName: \"\",\n    examinerOtherNames: \"\",\n    examinerEmail: \"\",\n    examinerPhone: \"\",\n    examinerCNI: \"\",\n    examinerCode: \"\",\n    examinerMatricule: \"\",\n    gender: \"\"\n  };\n\n  var _useForm = useForm({\n    examinerImage: \"\"\n  }),\n      _useForm2 = _slicedToArray(_useForm, 2),\n      state = _useForm2[0],\n      setState = _useForm2[1];\n\n  var uploadFile = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var files, data, res, file;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              files = e.target.files;\n              data = new FormData();\n              data.append(\"file\", files[0]);\n              data.append(\"upload_preset\", \"ineximages\");\n              _context.next = 6;\n              return fetch(\"https://api.cloudinary.com/v1_1/inex/image/upload\", {\n                method: \"POST\",\n                body: data\n              });\n\n            case 6:\n              res = _context.sent;\n              _context.next = 9;\n              return res.json();\n\n            case 9:\n              file = _context.sent;\n              console.log(file);\n              console.log(file.secure_url);\n              setState({\n                examinerImage: file.secure_url\n              });\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function uploadFile(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var _useMutation = useMutation(createExaminerMutation),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      createExaminer = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      loading = _useMutation2$.loading,\n      error = _useMutation2$.error;\n\n  return __jsx(Formik, {\n    method: \"POST\",\n    initialValues: initialValues,\n    validationSchema: validationSchema,\n    onSubmit: /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values, _ref2) {\n        var setSubmitting, resetForm, res;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                setSubmitting = _ref2.setSubmitting, resetForm = _ref2.resetForm;\n                _context2.next = 3;\n                return createExaminer({\n                  variables: _objectSpread(_objectSpread({}, values), {}, {\n                    examinerImage: state.examinerImage,\n                    examinerCode: uniqueCodeGen(12)\n                  })\n                });\n\n              case 3:\n                res = _context2.sent;\n                Router.push({\n                  pathname: \"/show/singleExaminer\",\n                  query: {\n                    id: res.data.createExaminer.id\n                  }\n                });\n                setTimeout(function () {\n                  console.log(JSON.stringify(values, null, 2));\n                  console.log(res);\n                  resetForm({\n                    values: \"\"\n                  });\n                  setSubmitting(false);\n                }, 200);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2, _x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, function (_ref4) {\n    var values = _ref4.values,\n        setFieldValue = _ref4.setFieldValue,\n        isSubmitting = _ref4.isSubmitting;\n    return __jsx(MinimStyledPage, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }, __jsx(\"h4\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    }, \"Renseignement Examinateur\"), __jsx(Error, {\n      error: error,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }\n    }), __jsx(StyledForm, {\n      disabled: isSubmitting || loading,\n      \"aria-busy\": isSubmitting || loading,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }, __jsx(Form, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, __jsx(AllControls, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, __jsx(TwoGroups, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, __jsx(InputGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 19\n      }\n    }, __jsx(SygexInput, {\n      name: \"file\",\n      type: \"file\",\n      onChange: uploadFile,\n      disabled: isSubmitting,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }), __jsx(FormLabel, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }\n    }, \"Gender\"), __jsx(RadioGroup, {\n      name: \"Gender\",\n      className: \"RadioSet\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }, __jsx(FormikRadio, {\n      label: \"Femele\",\n      name: \"gender\",\n      value: \"F\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 23\n      }\n    }), __jsx(FormikRadio, {\n      label: \"Male\",\n      name: \"gender\",\n      value: \"M\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 23\n      }\n    })), __jsx(SygexInput, {\n      name: \"examiner1stName\",\n      type: \"text\",\n      label: \"Nom\",\n      disabled: isSubmitting,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }\n    }), __jsx(SygexInput, {\n      name: \"examiner2ndName\",\n      type: \"text\",\n      label: \"Pr\\xE9nom\",\n      disabled: isSubmitting,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }), __jsx(SygexInput, {\n      name: \"examinerOtherNames\",\n      type: \"text\",\n      label: \"Autres Noms\",\n      disabled: isSubmitting,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }), __jsx(SygexInput, {\n      name: \"examinerMatricule\",\n      type: \"text\",\n      label: \"Num\\xE9ro Matricule\",\n      disabled: isSubmitting,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }), __jsx(SygexInput, {\n      name: \"examinerCNI\",\n      type: \"text\",\n      label: \"Num\\xE9ro de Carte d'Identit\\xE9 Nationale\",\n      disabled: isSubmitting,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }\n    }), __jsx(SygexInput, {\n      name: \"examinerPhone\",\n      type: \"number\",\n      label: \"Num\\xE9ro de portable\",\n      disabled: isSubmitting,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }\n    }), __jsx(SygexInput, {\n      name: \"examinerEmail\",\n      type: \"email\",\n      label: \"Votre Email\",\n      disabled: isSubmitting,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }\n    }), __jsx(PicFrame, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }\n    }, state.examinerImage && __jsx(\"img\", {\n      src: state.examinerImage,\n      alt: \"Upload image\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 25\n      }\n    })))), __jsx(ButtonStyled, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, __jsx(StyledButton, {\n      disabled: isSubmitting,\n      type: \"submit\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 19\n      }\n    }, \"Valid\", isSubmitting ? \"ation en cours\" : \"er\"))))));\n  });\n};\n\n_s(CreateExaminer, \"P3kJxus/+FWSkX3DPHKRpSxLC0w=\", false, function () {\n  return [useForm, useMutation];\n});\n\n_c5 = CreateExaminer;\nexport default CreateExaminer;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"InputGroup\");\n$RefreshReg$(_c2, \"PicFrame\");\n$RefreshReg$(_c3, \"TwoGroups\");\n$RefreshReg$(_c4, \"AllControls\");\n$RefreshReg$(_c5, \"CreateExaminer\");","map":{"version":3,"sources":["E:/sygefexMui/sygefexMui-frontend/src/components/examiner/CreateExaminer.jsx"],"names":["React","useMutation","MinimStyledPage","Error","Formik","Form","Router","styled","Yup","useForm","createExaminerMutation","SygexInput","StyledForm","ButtonStyled","StyledButton","uniqueCodeGen","FormikRadio","FormControl","FormLabel","RadioGroup","InputGroup","div","PicFrame","TwoGroups","AllControls","validationSchema","object","shape","examiner1stName","string","required","examiner2ndName","examinerOtherNames","examinerMatricule","examinerCNI","examinerPhone","number","gender","CreateExaminer","initialValues","examinerEmail","examinerCode","examinerImage","state","setState","uploadFile","e","files","target","data","FormData","append","fetch","method","body","res","json","file","console","log","secure_url","createExaminer","loading","error","values","setSubmitting","resetForm","variables","push","pathname","query","id","setTimeout","JSON","stringify","setFieldValue","isSubmitting"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useMutation} from \"@apollo/react-hooks\";\r\nimport { MinimStyledPage } from \"../styles/StyledPage\";\r\nimport Error from \"../ErrorMessage.js\";\r\nimport { Formik, Form } from \"formik\";\r\nimport Router from \"next/router\";\r\nimport styled from \"styled-components\";\r\nimport * as Yup from \"yup\";\r\nimport useForm from \"../utils/useForm\";\r\nimport { createExaminerMutation } from \"../queries&Mutations&Functions/Mutations\";\r\nimport {\r\n  SygexInput,\r\n  StyledForm,\r\n  ButtonStyled,\r\n  StyledButton,\r\n} from \"../utils/FormInputs\";\r\nimport {uniqueCodeGen} from \"../queries&Mutations&Functions/Functions\";\r\nimport {FormikRadio} from \"@dccs/react-formik-mui\";\r\nimport { FormControl, FormLabel, RadioGroup } from \"@material-ui/core\";\r\n\r\nconst InputGroup = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 0 1rem;\r\n  min-width: 12rem;\r\n  .RadioSet {\r\n    display: flex;\r\n    flex-direction: row;\r\n  }\r\n`;\r\n\r\nconst PicFrame = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-top: 1rem;\r\n  img {\r\n    margin-top: 1rem;\r\n    margin-left: 5rem;\r\n    height: 15rem;\r\n    width: 15rem;\r\n    border-radius: 15px;\r\n    background-size: contain;\r\n    background-position: center;\r\n  }\r\n`;\r\nconst TwoGroups = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(15rem, 1fr));\r\n`;\r\nconst AllControls = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 15rem;\r\n  img {\r\n    margin-top: 0.15rem;\r\n    margin-left: 0.5rem;\r\n    height: 13rem;\r\n    width: 13rem;\r\n    border-radius: 0.9rem;\r\n    background-size: contain;\r\n    background-position: center;\r\n  }\r\n`;\r\n\r\nconst validationSchema = Yup.object().shape({\r\n  examiner1stName: Yup.string().required(\"Nom obligatoire\"),\r\n  examiner2ndName: Yup.string().required(\"Prénom obligatoire\"),\r\n  examinerOtherNames: Yup.string(),\r\n  examinerMatricule: Yup.string().required(\"No de Matricule obligatoire\"),\r\n  examinerCNI: Yup.string().required(\"Numero de la CNI obligatoire\"),\r\n  examinerPhone: Yup.number().required(\"Numero de portable obligatoire\"),\r\n  gender: Yup.string().required(\"Choix de votre sexe obligatoire\"),\r\n});\r\n\r\nconst CreateExaminer = () => {\r\n  const initialValues = {\r\n    examiner1stName: \"\",\r\n    examiner2ndName: \"\",\r\n    examinerOtherNames: \"\",\r\n    examinerEmail: \"\",\r\n    examinerPhone: \"\",\r\n    examinerCNI: \"\",\r\n    examinerCode: \"\",\r\n    examinerMatricule: \"\",\r\n    gender: \"\",\r\n  };\r\n\r\n  const [state, setState] = useForm({ examinerImage: \"\" });\r\n\r\n  const uploadFile = async (e) => {\r\n    const files = e.target.files;\r\n    const data = new FormData();\r\n    data.append(\"file\", files[0]);\r\n    data.append(\"upload_preset\", \"ineximages\");\r\n    const res = await fetch(\r\n      \"https://api.cloudinary.com/v1_1/inex/image/upload\",\r\n      {\r\n        method: \"POST\",\r\n        body: data,\r\n      }\r\n    );\r\n    const file = await res.json();\r\n    console.log(file);\r\n    console.log(file.secure_url);\r\n    setState({ examinerImage: file.secure_url });\r\n  };\r\n\r\n  const [createExaminer, { loading, error }] = useMutation(\r\n    createExaminerMutation\r\n  );\r\n  return (\r\n    <Formik\r\n      method=\"POST\"\r\n      initialValues={initialValues}\r\n      validationSchema={validationSchema}\r\n      onSubmit={async (values, { setSubmitting, resetForm }) => {\r\n        const res = await createExaminer({\r\n          variables: {\r\n            ...values,\r\n            examinerImage: state.examinerImage,\r\n            examinerCode: uniqueCodeGen(12),\r\n          },\r\n        });\r\n        Router.push({\r\n          pathname: \"/show/singleExaminer\",\r\n          query: {\r\n            id: res.data.createExaminer.id,\r\n          },\r\n        });\r\n        setTimeout(() => {\r\n          console.log(JSON.stringify(values, null, 2));\r\n          console.log(res);\r\n          resetForm({ values: \"\" });\r\n          setSubmitting(false);\r\n        }, 200);\r\n      }}\r\n    >\r\n      {({ values, setFieldValue, isSubmitting }) => (\r\n        <MinimStyledPage>\r\n          <h4>Renseignement Examinateur</h4>\r\n          <Error error={error} />\r\n          <StyledForm\r\n            disabled={isSubmitting || loading }\r\n            aria-busy={isSubmitting || loading }\r\n          >\r\n            <Form>\r\n              <AllControls>\r\n                <TwoGroups>\r\n                  <InputGroup>\r\n                    <SygexInput\r\n                      name=\"file\"\r\n                      type=\"file\"\r\n                      onChange={uploadFile}\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <FormLabel>Gender</FormLabel>\r\n                    <RadioGroup name=\"Gender\" className=\"RadioSet\">\r\n                      <FormikRadio label=\"Femele\" name=\"gender\" value=\"F\" />\r\n                      <FormikRadio label=\"Male\" name=\"gender\" value=\"M\" />\r\n                    </RadioGroup>\r\n\r\n                    <SygexInput\r\n                      name=\"examiner1stName\"\r\n                      type=\"text\"\r\n                      label=\"Nom\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examiner2ndName\"\r\n                      type=\"text\"\r\n                      label=\"Prénom\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examinerOtherNames\"\r\n                      type=\"text\"\r\n                      label=\"Autres Noms\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examinerMatricule\"\r\n                      type=\"text\"\r\n                      label=\"Numéro Matricule\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examinerCNI\"\r\n                      type=\"text\"\r\n                      label=\"Numéro de Carte d'Identité Nationale\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examinerPhone\"\r\n                      type=\"number\"\r\n                      label=\"Numéro de portable\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <SygexInput\r\n                      name=\"examinerEmail\"\r\n                      type=\"email\"\r\n                      label=\"Votre Email\"\r\n                      disabled={isSubmitting}\r\n                    />\r\n                    <PicFrame>\r\n                      {state.examinerImage && (\r\n                        <img src={state.examinerImage} alt=\"Upload image\" />\r\n                      )}\r\n                    </PicFrame>\r\n                  </InputGroup>\r\n                </TwoGroups>\r\n                <ButtonStyled>\r\n                  <StyledButton disabled={isSubmitting} type=\"submit\">\r\n                    Valid{isSubmitting ? \"ation en cours\" : \"er\"}\r\n                  </StyledButton>\r\n                </ButtonStyled>\r\n              </AllControls>\r\n            </Form>\r\n          </StyledForm>\r\n        </MinimStyledPage>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\nexport default CreateExaminer;\r\n"]},"metadata":{},"sourceType":"module"}
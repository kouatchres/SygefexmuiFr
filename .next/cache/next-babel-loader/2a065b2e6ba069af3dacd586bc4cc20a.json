{"ast":null,"code":"var _jsxFileName = \"E:\\\\sygefexMui\\\\sygefexMui-frontend\\\\src\\\\components\\\\rank\\\\UpdateRank.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect } from 'react';\nimport * as Yup from 'yup';\nimport { Formik, Form } from 'formik';\nimport { useApolloClient, useMutation } from '@apollo/react-hooks';\nimport { MiniStyledPage } from '../styles/StyledPage';\nimport Error from '../ErrorMessage.js';\nimport { SygexInput, StyledForm, ButtonStyled, StyledButton } from '../utils/FormInputs';\nimport { updateRankMutation } from '../queries&Mutations&Functions/Mutations';\nimport { singleRankQuery } from '../queries&Mutations&Functions/Queries';\nimport useForm from '../utils/useForm';\nimport styled from 'styled-components';\nconst Controls = styled.div.withConfig({\n  displayName: \"UpdateRank__Controls\",\n  componentId: \"wdaecl-0\"\n})([\"padding:0 2rem;\"]);\n\nconst UpdateGenderHooks = ({\n  id\n}) => {\n  const [state, setState] = useForm({\n    rankCode: '',\n    rankName: ''\n  });\n  const client = useApolloClient();\n\n  const loadRankData = async () => {\n    const {\n      data\n    } = await client.query({\n      query: singleRankQuery,\n      variables: {\n        id\n      }\n    });\n    const getRankData = data.rank;\n    console.log(getRankData);\n    const {\n      rankName,\n      rankCode\n    } = getRankData;\n    setState({\n      rankCode: rankCode,\n      rankName: rankName\n    });\n  };\n\n  useEffect(() => {\n    loadRankData();\n  }, []);\n  const validationSchema = Yup.object().shape({\n    rankName: Yup.string().required(\"Nom du sexe obligatoire\"),\n    rankCode: Yup.string().required(\"Code du sexe  obligatoire\")\n  });\n  const [updateRank] = useMutation(updateRankMutation, {\n    variables: {\n      id\n    }\n  });\n  return __jsx(Formik, {\n    method: \"POST\",\n    initialValues: state || initialValues,\n    enableReinitialize: true,\n    validationSchema: validationSchema,\n    onSubmit: async (values, {\n      resetForm,\n      setSubmitting\n    }) => {\n      const res = await updateRank({\n        variables: _objectSpread(_objectSpread({}, values), {}, {\n          id: id\n        })\n      }); // Router.push({\n      // \tpathname: '/show/singleExam',\n      // \tquery: { id }\n      // });\n\n      setTimeout(() => {\n        console.log(JSON.stringify(values, null, 2));\n        console.log(res);\n        resetForm(true);\n        setSubmitting(false);\n      }, 200);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 3\n    }\n  }, ({\n    values,\n    isSubmitting\n  }) => __jsx(MiniStyledPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, __jsx(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 6\n    }\n  }, \"Modification d'info poste d'examinateur\"), __jsx(StyledForm, {\n    disabled: isSubmitting,\n    \"aria-busy\": isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 6\n    }\n  }, __jsx(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, __jsx(Controls, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 8\n    }\n  }, __jsx(SygexInput, {\n    type: \"text\",\n    id: \"rankName\",\n    name: \"rankName\",\n    label: \"Nom du poste\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }), __jsx(SygexInput, {\n    type: \"text\",\n    id: \"rankCode\",\n    name: \"rankCode\",\n    label: \"Code du poste\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }), __jsx(ButtonStyled, {\n    className: \"submitButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, __jsx(StyledButton, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 10\n    }\n  }, \"valid\", isSubmitting ? 'ation en cours' : 'er')))))));\n};\n\nexport default UpdateGenderHooks;","map":{"version":3,"sources":["E:/sygefexMui/sygefexMui-frontend/src/components/rank/UpdateRank.jsx"],"names":["React","useEffect","Yup","Formik","Form","useApolloClient","useMutation","MiniStyledPage","Error","SygexInput","StyledForm","ButtonStyled","StyledButton","updateRankMutation","singleRankQuery","useForm","styled","Controls","div","UpdateGenderHooks","id","state","setState","rankCode","rankName","client","loadRankData","data","query","variables","getRankData","rank","console","log","validationSchema","object","shape","string","required","updateRank","initialValues","values","resetForm","setSubmitting","res","setTimeout","JSON","stringify","isSubmitting"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport * as Yup from 'yup';\r\nimport { Formik, Form } from 'formik';\r\nimport { useApolloClient, useMutation } from '@apollo/react-hooks';\r\n\r\nimport { MiniStyledPage } from '../styles/StyledPage';\r\nimport Error from '../ErrorMessage.js';\r\nimport { SygexInput, StyledForm, ButtonStyled, StyledButton } from '../utils/FormInputs'\r\nimport { updateRankMutation } from '../queries&Mutations&Functions/Mutations';\r\nimport { singleRankQuery } from '../queries&Mutations&Functions/Queries';\r\nimport useForm from '../utils/useForm';\r\n\r\nimport styled from 'styled-components'\r\n\r\n\r\nconst Controls = styled.div`\r\npadding:0 2rem;\r\n`;\r\nconst UpdateGenderHooks = ({ id }) => {\r\n\tconst [state, setState] = useForm({ rankCode: '', rankName: '' })\r\n\tconst client = useApolloClient()\r\n\r\n\r\n\tconst loadRankData = async () => {\r\n\t\tconst { data } = await client.query({\r\n\t\t\tquery: singleRankQuery,\r\n\t\t\tvariables: { id }\r\n\r\n\t\t})\r\n\t\tconst getRankData = data.rank\r\n\t\tconsole.log(getRankData)\r\n\t\tconst {\r\n\t\t\trankName,\r\n\t\t\trankCode,\r\n\t\t} = getRankData\r\n\r\n\t\tsetState({ rankCode: rankCode, rankName: rankName })\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tloadRankData()\r\n\t}, [])\r\n\r\n\r\n\tconst validationSchema = Yup.object().shape({\r\n\t\trankName: Yup.string().required(\"Nom du sexe obligatoire\"),\r\n\t\trankCode: Yup.string().required(\"Code du sexe  obligatoire\"),\r\n\t})\r\n\tconst [updateRank] = useMutation(updateRankMutation, {\r\n\t\tvariables: { id }\r\n\t})\r\n\r\n\treturn (\r\n\t\t<Formik\r\n\t\t\tmethod=\"POST\"\r\n\t\t\tinitialValues={state || initialValues}\r\n\t\t\tenableReinitialize={true}\r\n\t\t\tvalidationSchema={validationSchema}\r\n\t\t\tonSubmit={async (values, { resetForm, setSubmitting }) => {\r\n\t\t\t\tconst res = await updateRank({\r\n\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t...values,\r\n\t\t\t\t\t\tid: id\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\t// Router.push({\r\n\t\t\t\t// \tpathname: '/show/singleExam',\r\n\t\t\t\t// \tquery: { id }\r\n\t\t\t\t// });\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tconsole.log(JSON.stringify(values, null, 2));\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tresetForm(true);\r\n\t\t\t\t\tsetSubmitting(false);\r\n\t\t\t\t}, 200);\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{({ values, isSubmitting }) => (\r\n\r\n\t\t\t\t<MiniStyledPage>\r\n\t\t\t\t\t<h4>Modification d'info poste d'examinateur</h4>\r\n\t\t\t\t\t<StyledForm disabled={isSubmitting} aria-busy={isSubmitting} >\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<Controls>\r\n\t\t\t\t\t\t\t\t<SygexInput\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tid=\"rankName\"\r\n\t\t\t\t\t\t\t\t\tname=\"rankName\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Nom du poste\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<SygexInput\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tid=\"rankCode\"\r\n\t\t\t\t\t\t\t\t\tname=\"rankCode\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Code du poste\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<ButtonStyled className=\"submitButton\">\r\n\t\t\t\t\t\t\t\t\t<StyledButton type=\"submit\">\r\n\t\t\t\t\t\t\t\t\t\tvalid{isSubmitting ? 'ation en cours' : 'er'}\r\n\t\t\t\t\t\t\t\t\t</StyledButton>\r\n\t\t\t\t\t\t\t\t</ButtonStyled>\r\n\t\t\t\t\t\t\t</Controls>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</StyledForm>\r\n\t\t\t\t</MiniStyledPage>\r\n\t\t\t)}\r\n\t\t</Formik>\r\n\t);\r\n}\r\n\r\nexport default UpdateGenderHooks;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"E:\\\\sygefexMui\\\\sygefexMui-frontend\\\\src\\\\components\\\\candidate\\\\DeleteCandidate.jsx\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport styled from \"styled-components\";\nimport { getAllCandidatesQuery } from \"../queries&Mutations&Functions/Queries\";\nconst deleteCandidateMutation = gql`\n  mutation deleteCandidateMutation($id: ID!) {\n    deleteCandidate(id: $id) {\n      id\n    }\n  }\n`;\nconst DelBtn = styled.button.withConfig({\n  displayName: \"DeleteCandidate__DelBtn\",\n  componentId: \"rkcxlh-0\"\n})([\"color:white;font-weight:bold;background-color:#375;border-radius:10px;font-size:1.1rem;height:30px;\"]);\n\nclass DeleteCandidate extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"updateCache\", (cache, payload) => {\n      // manually update the cache so that the data are all the same\n      // 1. read the cache for the data we want\n      const data = cache.readQuery({\n        query: getAllCandidatesQuery\n      }); // filter out the deleted candidate from the data in the cache\n\n      data.candidates = data.candidates.filter(candidate => candidate.id !== payload.data.deleteCandidate.id); //  3. write the new data back to the cache\n\n      console.log(\"getting payload\");\n      console.log(payload);\n      cache.writeQuery({\n        query: getAllCandidatesQuery,\n        data\n      });\n    });\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 7\n      }\n    }, __jsx(Mutation, {\n      mutation: deleteCandidateMutation,\n      variables: {\n        id: this.props.id\n      },\n      update: this.updateCache,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }\n    }, (deleteCandidate, {\n      error\n    }) => __jsx(DelBtn, {\n      onClick: () => {\n        if (confirm(\"Sure to delete this candidate ?\")) {\n          deleteCandidate();\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    }, this.props.children)));\n  }\n\n}\n\nexport default DeleteCandidate;","map":{"version":3,"sources":["E:/sygefexMui/sygefexMui-frontend/src/components/candidate/DeleteCandidate.jsx"],"names":["React","Component","Mutation","gql","styled","getAllCandidatesQuery","deleteCandidateMutation","DelBtn","button","DeleteCandidate","cache","payload","data","readQuery","query","candidates","filter","candidate","id","deleteCandidate","console","log","writeQuery","render","props","updateCache","error","confirm","children"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,qBAAT,QAAsC,wCAAtC;AAEA,MAAMC,uBAAuB,GAAGH,GAAI;AACpC;AACA;AACA;AACA;AACA;AACA,CANA;AAQA,MAAMI,MAAM,GAAGH,MAAM,CAACI,MAAV;AAAA;AAAA;AAAA,2GAAZ;;AASA,MAAMC,eAAN,SAA8BR,SAA9B,CAAwC;AAAA;AAAA;;AAAA,yCACxB,CAACS,KAAD,EAAQC,OAAR,KAAoB;AAChC;AACA;AACA,YAAMC,IAAI,GAAGF,KAAK,CAACG,SAAN,CAAgB;AAAEC,QAAAA,KAAK,EAAET;AAAT,OAAhB,CAAb,CAHgC,CAIhC;;AACAO,MAAAA,IAAI,CAACG,UAAL,GAAkBH,IAAI,CAACG,UAAL,CAAgBC,MAAhB,CAAuBC,SAAS,IAAIA,SAAS,CAACC,EAAV,KAAiBP,OAAO,CAACC,IAAR,CAAaO,eAAb,CAA6BD,EAAlF,CAAlB,CALgC,CAMhC;;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYV,OAAZ;AACAD,MAAAA,KAAK,CAACY,UAAN,CAAiB;AAAER,QAAAA,KAAK,EAAET,qBAAT;AAAgCO,QAAAA;AAAhC,OAAjB;AACD,KAXqC;AAAA;;AAatCW,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,QAAD;AAAU,MAAA,QAAQ,EAAEjB,uBAApB;AAA6C,MAAA,SAAS,EAAE;AAAEY,QAAAA,EAAE,EAAE,KAAKM,KAAL,CAAWN;AAAjB,OAAxD;AAA+E,MAAA,MAAM,EAAE,KAAKO,WAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAACN,eAAD,EAAkB;AAAEO,MAAAA;AAAF,KAAlB,KACC,MAAC,MAAD;AACE,MAAA,OAAO,EAAE,MAAM;AACb,YAAIC,OAAO,CAAC,iCAAD,CAAX,EAAgD;AAC9CR,UAAAA,eAAe;AAChB;AACF,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOG,KAAKK,KAAL,CAAWI,QAPd,CAFJ,CADF,CADF;AAiBD;;AA/BqC;;AAkCxC,eAAenB,eAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport styled from \"styled-components\";\r\nimport { getAllCandidatesQuery } from \"../queries&Mutations&Functions/Queries\";\r\n\r\nconst deleteCandidateMutation = gql`\r\n  mutation deleteCandidateMutation($id: ID!) {\r\n    deleteCandidate(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nconst DelBtn = styled.button`\r\n  color: white;\r\n  font-weight: bold;\r\n  background-color: #375;\r\n  border-radius: 10px;\r\n  font-size: 1.1rem;\r\n  height: 30px;\r\n`;\r\n\r\nclass DeleteCandidate extends Component {\r\n  updateCache = (cache, payload) => {\r\n    // manually update the cache so that the data are all the same\r\n    // 1. read the cache for the data we want\r\n    const data = cache.readQuery({ query: getAllCandidatesQuery });\r\n    // filter out the deleted candidate from the data in the cache\r\n    data.candidates = data.candidates.filter(candidate => candidate.id !== payload.data.deleteCandidate.id);\r\n    //  3. write the new data back to the cache\r\n    console.log(\"getting payload\");\r\n    console.log(payload);\r\n    cache.writeQuery({ query: getAllCandidatesQuery, data });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Mutation mutation={deleteCandidateMutation} variables={{ id: this.props.id }} update={this.updateCache}>\r\n          {(deleteCandidate, { error }) => (\r\n            <DelBtn\r\n              onClick={() => {\r\n                if (confirm(\"Sure to delete this candidate ?\")) {\r\n                  deleteCandidate();\r\n                }\r\n              }}\r\n            >\r\n              {this.props.children}\r\n            </DelBtn>\r\n          )}\r\n        </Mutation>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DeleteCandidate;\r\n"]},"metadata":{},"sourceType":"module"}